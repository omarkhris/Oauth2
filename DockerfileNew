FROM openjdk:17

COPY target/oauth2-0.0.1-SNAPSHOT.jar oauth2-0.0.1-SNAPSHOT.jar

# Set environment variables for MongoDB connection
ENV SPRING_DATA_MONGODB_URI=mongodb://moon:moon123@db-service:27017/userdb
ENV SPRING_DATA_MONGODB_DATABASE=userdb
ENV SPRING_DATA_MONGODB_USERNAME=moon
ENV SPRING_DATA_MONGODB_PASSWORD=moon123
ENV SPRING_DATA_MONGODB_AUTHENTICATION_DATABASE=admin
ENV SPRING_DATA_MONGODB_AUTHENTICATION_MECHANISM=SCRAM-SHA-1

ENTRYPOINT ["java", "-jar", "/oauth2-0.0.1-SNAPSHOT.jar"]

EXPOSE 8080

